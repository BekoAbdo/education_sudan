<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة النصائح التعليمية</title>
    <style>
        /* استيراد خط عربي أنيق */
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #FFFFFF;
            color: #000000;
            direction: rtl;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* تصميم التبويبات */
        .tabs-container {
            margin-bottom: 30px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 500;
            font-size: 18px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            color: #003161;
        }
        
        .tab.active {
            color: #003161;
            font-weight: 700;
            border-bottom: 3px solid #003161;
        }
        
        /* شريط البحث وفرز المحتوى */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .search-container {
            flex: 1;
            min-width: 250px;
            position: relative;
        }
        
        .search-bar {
            width: 100%;
            padding: 10px 15px;
            padding-right: 40px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-family: 'Tajawal', sans-serif;
            font-size: 15px;
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }
        
        .sort-options {
            display: flex;
            gap: 10px;
            background: #f5f5f5;
            padding: 5px;
            border-radius: 4px;
        }
        
        .sort-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            padding: 5px 15px;
            font-size: 14px;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        
        .sort-btn.active {
            background: #003161;
            color: white;
            font-weight: 500;
        }
        
        /* تصميم البطاقات */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 49, 97, 0.1);
        }
        
        .card-content {
            padding: 20px;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #003161;
            font-weight: bold;
        }
        
        .card-title {
            font-weight: 700;
            font-size: 18px;
            color: #003161;
            margin-bottom: 10px;
        }
        
        .card-summary {
            font-size: 14px;
            color: #333;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .card-full-content {
            font-size: 14px;
            color: #333;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #e0e0e0;
            display: none;
        }
        
        .read-more {
            display: inline-block;
            background-color: #003161;
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
            font-family: 'Tajawal';
            margin-top: 10px;
        }
        
        .read-more:hover {
            background-color: #002147;
        }
        
        .card-footer {
            border-top: 1px solid #f0f0f0;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafafa;
        }
        
        .card-date {
            font-size: 12px;
            color: #777;
        }
        
        .card-rating {
            color: #ffc107;
            font-size: 14px;
        }
        
        /* التصميم للجوال */
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-container {
                min-width: 100%;
            }
            
            .sort-options {
                justify-content: center;
            }
        }
        
        /* رسالة عندما لا توجد نتائج */
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: #003161; margin-bottom: 10px;">النصائح التعليمية</h1>
        <p style="margin-bottom: 30px; color: #555;">استكشف النصائح والقصص التي تساعدك في رحلتك التعليمية</p>
        
        <div class="tabs-container">
            <div class="tabs">
                <div class="tab active" data-tab="general">💡 نصائح عامة</div>
                <div class="tab" data-tab="sudanese">📚 نصائح الشهادة السودانية</div>
                <div class="tab" data-tab="stories">🌟 قصص نجاح</div>
            </div>
        </div>
        
        <div class="controls">
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="ابحث عن نصيحة أو قصة نجاح...">
                <span class="search-icon">🔍</span>
            </div>
            
            <div class="sort-options">
                <button class="sort-btn active" data-sort="newest">الأحدث</button>
                <button class="sort-btn" data-sort="helpful">الأكثر فائدة</button>
            </div>
        </div>
        
        <div class="cards-grid" id="cardsContainer">
            <!-- سيتم إضافة البطاقات هنا عبر JavaScript -->
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <script>
        // بيانات البطاقات مع إضافة محتوى كامل لكل بطاقة
        const cardsData = {
            general: [
                {
                    id: 1,
                    title: "كيفية تنظيم وقت الدراسة",
                    summary: "إدارة الوقت بشكل فعال هي مفتاح النجاح في الدراسة. تعلم كيفية تقسيم وقتك بين المواد وإنشاء جدول واقعي يساعدك على تحقيق أهدافك التعليمية دون إرهاق.",
                    fullContent: `<p>تنظيم الوقت من أهم المهارات التي يجب أن يتقنها الطالب الناجح. إليك بعض النصائح الفعالة:</p>
                                <ol>
                                    <li>قم بإعداد جدول زمني واقعي يأخذ في الاعتبار جميع المواد الدراسية</li>
                                    <li>خصص فترات للراحة بين جلسات الدراسة (مثلاً 5 دقائق كل 25 دقيقة)</li>
                                    <li>رتب أولوياتك وركز على المواد الأكثر أهمية أو الأصعب بالنسبة لك</li>
                                    <li>استخدم أدوات مثل التقويم أو التطبيقات الخاصة بتنظيم الوقت</li>
                                    <li>احرص على النوم الكافي لتحقيق أفضل أداء عقلي</li>
                                </ol>
                                <p>تذكر أن الجدول المثالي هو الذي تستطيع الالتزام به على المدى الطويل.</p>`,
                    date: "2023-10-15",
                    rating: 4,
                    type: "general"
                },
                {
                    id: 2,
                    title: "تقنيات الحفظ الفعال",
                    summary: "اكتشف أساليب الحفظ التي تعتمد على فهم المحتوى بدلاً من التلقين، مما يساعدك على تذكر المعلومات لفترة أطول وبكفاءة أعلى.",
                    fullContent: `<p>الحفظ الفعال يعتمد على الفهم أولاً ثم التكرار الذكي. إليك أفضل التقنيات:</p>
                                <ul>
                                    <li><strong>تقنية التلخيص:</strong> اكتب ما تريد حفظه بكلماتك الخاصة</li>
                                    <li><strong>الخرائط الذهنية:</strong> تساعد في ربط المفاهيم ببعضها البعض</li>
                                    <li><strong>التكرار المتباعد:</strong> راجع المعلومات على فترات متباعدة (بعد يوم، ثم أسبوع، ثم شهر)</li>
                                    <li><strong>التعليم للآخرين:</strong> حاول شرح المعلومة لشخص آخر أو حتى تخيل ذلك</li>
                                    <li><strong>الربط القصصي:</strong> حول المعلومات إلى قصة لتسهيل تذكرها</li>
                                </ul>
                                <p>تجنب الحفظ في وقت متأخر من الليل أو عندما تكون مرهقاً.</p>`,
                    date: "2023-09-28",
                    rating: 5,
                    type: "general"
                },
                {
                    id: 3,
                    title: "كيفية التعامل مع القلق الامتحاني",
                    summary: "القلق الامتحاني قد يعيق أداءك حتى لو كنت مستعدًا جيدًا. تعلم تقنيات بسيطة للسيطرة على هذا القلق وتحويله إلى طاقة إيجابية.",
                    fullContent: `<p>القلق الامتحاني ظاهرة طبيعية ولكن يجب التحكم فيها. إليك كيفية ذلك:</p>
                                <h4>قبل الامتحان:</h4>
                                <ul>
                                    <li>استعد جيداً وابدأ المذاكرة مبكراً</li>
                                    <li>تدرب على نماذج امتحانات سابقة</li>
                                    <li>احصل على قسط كافٍ من النوم ليلة الامتحان</li>
                                </ul>
                                
                                <h4>أثناء الامتحان:</h4>
                                <ul>
                                    <li>اقرأ جميع الأسئلة بدقة في البداية</li>
                                    <li>ابدأ بالإجابة على الأسئلة الأسهل لتعزيز ثقتك</li>
                                    <li>خذ نفساً عميقاً إذا شعرت بالتوتر</li>
                                    <li>راقب وقتك ولا تقضي وقتاً طويلاً على سؤال واحد</li>
                                </ul>
                                
                                <h4>تذكر:</h4>
                                <p>بعض القلق مفيد لأنه يحفزك على الأداء الجيد، ولكن الكثير منه قد يعيق تفكيرك. ثق في نفسك وفي استعدادك.</p>`,
                    date: "2023-11-02",
                    rating: 4,
                    type: "general"
                }
            ],
            sudanese: [
                {
                    id: 4,
                    title: "نصائح لامتحان الرياضيات",
                    summary: "استراتيجيات خاصة لامتحان الرياضيات في الشهادة السودانية، بما في ذلك كيفية التعامل مع المسائل الصعبة وإدارة الوقت خلال الامتحان.",
                    fullContent: `<p>امتحان الرياضيات في الشهادة السودانية يتطلب استراتيجية خاصة. إليك أهم النصائح:</p>
                                <h4>قبل الامتحان:</h4>
                                <ol>
                                    <li>راجع جميع المفاهيم الأساسية في الجبر والهندسة</li>
                                    <li>تدرب على حل المسائل بطرق مختلفة</li>
                                    <li>احفظ القوانين الرئيسية والصيغ الرياضية</li>
                                    <li>حل نماذج امتحانات سابقة لمعرفة نمط الأسئلة</li>
                                </ol>
                                
                                <h4>أثناء الامتحان:</h4>
                                <ol>
                                    <li>اقرأ كل سؤال بعناية وفهم المطلوب بدقة</li>
                                    <li>ابدأ بالمسائل التي تعرفها جيداً</li>
                                    <li>إذا علقت في مسألة، انتقل إلى التي تليها ثم عد إليها لاحقاً</li>
                                    <li>اكتب خطوات الحل بوضوح حتى لو لم تصل إلى الإجابة النهائية</li>
                                    <li>راجع إجاباتك إذا سمح الوقت</li>
                                </ol>
                                
                                <p>تذكر أن تنظيم الوقت خلال الامتحان أساسي، خصص وقتاً معقولاً لكل سؤال حسب درجاته.</p>`,
                    date: "2023-10-20",
                    rating: 5,
                    type: "sudanese"
                },
                {
                    id: 5,
                    title: "تحليل أسئلة اللغة العربية",
                    summary: "كيفية تحليل أسئلة اللغة العربية في الشهادة السودانية وفهم ما يريده المصحح بالضبط للحصول على أعلى الدرجات.",
                    fullContent: `<p>امتحان اللغة العربية في الشهادة السودانية يشمل عدة أقسام، لكل منها استراتيجية خاصة:</p>
                                
                                <h4>1. النصوص الأدبية:</h4>
                                <ul>
                                    <li>اقرأ النص عدة مرات لفهم الفكرة العامة</li>
                                    <li>حدد الأسلوب الأدبي (وصفي، سردي، حجاجي...)</li>
                                    <li>استخرج الصور البيانية والأساليب البلاغية</li>
                                </ul>
                                
                                <h4>2. القواعد النحوية:</h4>
                                <ul>
                                    <li>راجع القواعد الأساسية (الإعراب، النواسخ، الأفعال...)</li>
                                    <li>تدرب على التحليل النحوي للجمل</li>
                                    <li>انتبه للحركات الإعرابية</li>
                                </ul>
                                
                                <h4>3. التعبير:</h4>
                                <ul>
                                    <li>خطط لموضوعك قبل الكتابة (مقدمة، عرض، خاتمة)</li>
                                    <li>استخدم مفردات متنوعة وأساليب متنوعة</li>
                                    <li>راجع الأخطاء الإملائية والنحوية</li>
                                </ul>
                                
                                <p>نصيحة أخيرة: اكتب بخط واضح ومنظم، فالمصحح يفضل الإجابات المقروءة حتى لو كانت الإجابة صحيحة ولكن بخط غير واضح قد تخسر بعض الدرجات.</p>`,
                    date: "2023-09-15",
                    rating: 4,
                    type: "sudanese"
                },
                {
                    id: 6,
                    title: "التحضير لامتحان العلوم",
                    summary: "خطة متكاملة للتحضير لامتحان العلوم في الشهادة السودانية، تشمل فهم المفاهيم الأساسية وحل نماذج الامتحانات السابقة.",
                    fullContent: `<p>امتحان العلوم يتطلب فهمًا عميقًا للمفاهيم وتطبيقًا عمليًا. إليك خطة التحضير:</p>
                                
                                <h4>الخطوة 1: فهم المفاهيم الأساسية</h4>
                                <ul>
                                    <li>راجع التعاريف العلمية بدقة</li>
                                    <li>افهم العلاقات بين المفاهيم المختلفة</li>
                                    <li>تعلم كيفية تطبيق القوانين العلمية</li>
                                </ul>
                                
                                <h4>الخطوة 2: دراسة التجارب العملية</h4>
                                <ul>
                                    <li>تعرف على الأدوات المستخدمة في كل تجربة</li>
                                    <li>افهم خطوات التجارب ونتائجها المتوقعة</li>
                                    <li>تدرب على رسم الأدوات والتجارب</li>
                                </ul>
                                
                                <h4>الخطوة 3: حل المسائل العلمية</h4>
                                <ul>
                                    <li>تدرب على حل مسائل الكيمياء والفيزياء</li>
                                    <li>تعلم تحويل الوحدات بشكل صحيح</li>
                                    <li>راجع الحسابات الرياضية المرتبطة بالعلوم</li>
                                </ul>
                                
                                <h4>الخطوة 4: المراجعة النهائية</h4>
                                <ul>
                                    <li>حل نماذج امتحانات سابقة</li>
                                    <li>راجع الأخطاء الشائعة</li>
                                    <li>ركز على النقاط التي وردت في عدة امتحانات</li>
                                </ul>
                                
                                <p>تذكر أن امتحان العلوم ليس للحفظ فقط، بل للفهم والتطبيق. حاول ربط المعلومات بحياتك اليومية لتثبيتها في ذهنك.</p>`,
                    date: "2023-11-05",
                    rating: 3,
                    type: "sudanese"
                }
            ],
            stories: [
                {
                    id: 7,
                    title: "من صعوبات إلى تفوق",
                    summary: "قصة أحمد الذي تغلب على صعوبات التعلم وحقق 90% في الشهادة السودانية بفضل المثابرة والاستراتيجيات الصحيحة التي اتبعها في دراسته.",
                    fullContent: `<p>أحمد طالب كان يعاني من صعوبات في التعلم منذ الصغر، خاصة في مادة الرياضيات. في الصف الثاني الثانوي، قرر أن يغير مسار حياته الدراسية.</p>
                                
                                <h4>التحديات التي واجهها:</h4>
                                <ul>
                                    <li>صعوبة في فهم المسائل الرياضية المعقدة</li>
                                    <li>مشاكل في التركيز لفترات طويلة</li>
                                    <li>عدم الثقة في قدراته الدراسية</li>
                                </ul>
                                
                                <h4>كيف تغلب عليها:</h4>
                                <ol>
                                    <li>بدأ بالبحث عن طرق بديلة لفهم الرياضيات عبر مقاطع اليوتيوب التعليمية</li>
                                    <li>قسّم المواد إلى أجزاء صغيرة يدرسها على فترات</li>
                                    <li>أنشأ مجموعة دراسة مع زملائه لتبادل المعرفة</li>
                                    <li>استعان بمدرس خاص لمساعدته في النقاط الصعبة</li>
                                    <li>حافظ على جدول نوم منتظم لتحسين تركيزه</li>
                                </ol>
                                
                                <h4>النتيجة:</h4>
                                <p>بعد عام من العمل الجاد، استطاع أحمد ليس فقط اجتياز امتحانات الشهادة السودانية، بل حقق 90% كمجموع عام، وأصبح من أوائل دفعته في مادة الرياضيات التي كانت تمثل أصعب التحديات له.</p>
                                
                                <p>يقول أحمد: "التحديات التي واجهتها علمتني أن النجاح ليس حكراً على الأذكياء فقط، بل للمثابرين الذين لا يستسلمون".</p>`,
                    date: "2023-10-10",
                    rating: 5,
                    type: "stories",
                    author: "أحمد محمد"
                },
                {
                    id: 8,
                    title: "رحلة كفاح",
                    summary: "كيف استطاعت سارة أن توازن بين مسؤوليات المنزل والدراسة لتحقق نتائج ممتازة في الشهادة السودانية رغم كل التحديات.",
                    fullContent: `<p>سارة، الطالبة التي تربي شقيقين صغيرين بعد وفاة والدها، تمكنت من تحقيق 88% في الشهادة السودانية رغم مسؤولياتها العائلية الكبيرة.</p>
                                
                                <h4>التحديات:</h4>
                                <ul>
                                    <li>رعاية شقيقين في المرحلة الابتدائية</li>
                                    <li>إدارة شؤون المنزل بمفردها</li>
                                    <li>عدم وجود مكان هادئ للدراسة في المنزل</li>
                                    <li>ضيق الوقت بين المدرسة والمنزل</li>
                                </ul>
                                
                                <h4>استراتيجيتها:</h4>
                                <ol>
                                    <li>استغلال الوقت بكفاءة (كانت تدرس أثناء انتظارها الطعام على النار)</li>
                                    <li>الاستيقاظ مبكراً قبل إخوتها بساعتين للمذاكرة الهادئة</li>
                                    <li>استخدام التسجيلات الصوتية لمراجعة الدروس أثناء قيامها بالأعمال المنزلية</li>
                                    <li>إنشاء جدول أسبوعي يوزع فيه واجبات المنزل والدراسة</li>
                                    <li>الاستعانة بمعلمة في المدرسة لشرح النقاط الصعبة أثناء الفسحة</li>
                                </ol>
                                
                                <h4>كلمات سارة:</h4>
                                <p>"العقبات لا توقفنا، بل تجبرنا على أن نكون أكثر إبداعاً في إيجاد الحلول. تعلمت أن الدقائق القليلة إذا استغلت جيداً، تصنع فرقاً كبيراً."</p>
                                
                                <p>اليوم، سارة تدرس في كلية الطب بجامعة الخرطوم، وتحلم بأن تصبح طبيبة أطفال لمساعدة الآخرين.</p>`,
                    date: "2023-09-22",
                    rating: 4,
                    type: "stories",
                    author: "سارة علي"
                },
                {
                    id: 9,
                    title: "من الفشل إلى النجاح",
                    summary: "تجربة خالد مع الفشل في أول محاولة للشهادة السودانية وكيف استفاد من هذا الفشل لتحقيق النجاح في المحاولة الثانية.",
                    fullContent: `<p>خالد الذي فشل في أول محاولة للشهادة السودانية (حصل على 45%)، استطاع في المحاولة الثانية تحقيق 82% بفضل الدروس المستفادة من فشله.</p>
                                
                                <h4>أسباب الفشل الأولى:</h4>
                                <ul>
                                    <li>الاعتماد على الحفظ دون الفهم</li>
                                    <li>المذاكرة في اللحظات الأخيرة قبل الامتحان</li>
                                    <li>عدم حل نماذج امتحانات سابقة</li>
                                    <li>الدراسة بطريقة عشوائية دون تخطيط</li>
                                </ul>
                                
                                <h4>ما تغير في المحاولة الثانية:</h4>
                                <ol>
                                    <li>بدأ التحضير مبكراً (قبل 6 أشهر من الامتحان)</li>
                                    <li>ركز على فهم الأساسيات قبل التوسع</li>
                                    <li>حل أكثر من 20 نموذج امتحان سابق</li>
                                    <li>تعلم من أخطائه في الامتحان الأول</li>
                                    <li>استعان بزملاء ناجحين لمعرفة طرق دراستهم</li>
                                    <li>اهتم بصحته الجسدية (الغذاء، النوم، الرياضة)</li>
                                </ol>
                                
                                <h4>نصيحة خالد:</h4>
                                <p>"الفشل ليس نهاية الطريق، بل بداية لفهم أفضل لذاتك وقدراتك. دروس الفشل أثمن من أي نجاح سهل. اليوم أنا ممتن لفشلي الأول لأنه علمني كيف أنجح حقاً."</p>
                                
                                <p>خالد الآن يدرس الهندسة في جامعة السودان للعلوم والتكنولوجيا، ويقدم دورات مجانية لمساعدة الطلاب على تجنب الأخطاء التي وقع فيها.</p>`,
                    date: "2023-08-30",
                    rating: 5,
                    type: "stories",
                    author: "خالد عمر"
                }
            ]
        };

          // تهيئة Fuse.js للبحث المرن
          const fuseOptions = {
                keys: [
                    'fullContent',
                    'title',

                ],
                includeScore: true,
                threshold: 0.2,
                ignoreLocation: true,
                minMatchCharLength: 3
            };
      
            const fuse = new Fuse(cardsData, fuseOptions);

        // عناصر DOM
        const tabs = document.querySelectorAll('.tab');
        const sortButtons = document.querySelectorAll('.sort-btn');
        const searchBar = document.querySelector('.search-bar');
        const cardsContainer = document.getElementById('cardsContainer');
        
        // المتغيرات الحالية
        let currentTab = 'general';
        let currentSort = 'newest';
        let currentSearch = '';
        
        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            renderCards();
            
            // أحداث التبويبات
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentTab = tab.dataset.tab;
                    renderCards();
                });
            });
            
            // أحداث فرز المحتوى
            sortButtons.forEach(button => {
                button.addEventListener('click', () => {
                    sortButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentSort = button.dataset.sort;
                    renderCards();
                });
            });
            
            // حدث البحث
            searchBar.addEventListener('input', (e) => {
                currentSearch = e.target.value.trim().toLowerCase();
                renderCards();
            });
        });
        
        // دالة عرض البطاقات
        function renderCards() {
            // تصفية البطاقات حسب التبويب المختار
            let filteredCards = cardsData[currentTab];
            
            // تصفية حسب البحث إن وجد
            if (currentSearch) {
                filteredCards = filteredCards.filter(card => 
                    card.title.toLowerCase().includes(currentSearch) || 
                    card.summary.toLowerCase().includes(currentSearch) ||
                    (card.author && card.author.toLowerCase().includes(currentSearch))
                );
            }
            
            // فرز البطاقات
            if (currentSort === 'newest') {
                filteredCards.sort((a, b) => new Date(b.date) - new Date(a.date));
            } else {
                filteredCards.sort((a, b) => b.rating - a.rating);
            }
            
            // عرض البطاقات
            if (filteredCards.length === 0) {
                cardsContainer.innerHTML = `
                    <div class="no-results">
                        <p>لا توجد نتائج مطابقة للبحث</p>
                    </div>
                `;
            } else {
                cardsContainer.innerHTML = filteredCards.map(card => createCardHTML(card)).join('');
                
                // إضافة أحداث لأزرار اقرأ المزيد
                document.querySelectorAll('.read-more').forEach(button => {
                    button.addEventListener('click', function() {
                        const cardId = this.closest('.card').dataset.id;
                        const fullContent = this.closest('.card').querySelector('.card-full-content');
                        
                        if (fullContent.style.display === 'block') {
                            fullContent.style.display = 'none';
                            this.textContent = 'اقرأ المزيد';
                        } else {
                            fullContent.style.display = 'block';
                            this.textContent = 'إخفاء المحتوى';
                        }
                    });
                });
            }
        }
        
        // دالة إنشاء HTML للبطاقة
        function createCardHTML(card) {
            const date = new Date(card.date).toLocaleDateString('ar-EG');
            const stars = '★'.repeat(card.rating) + '☆'.repeat(5 - card.rating);
            
            // إذا كانت قصة نجاح نضيف صورة الملف الشخصي
            const profileSection = card.type === 'stories' ? `
                <div class="card-header">
                    <div class="profile-pic">${card.author.charAt(0)}</div>
                    <div class="card-title">${card.title}</div>
                </div>
            ` : `<div class="card-title">${card.title}</div>`;
            
            return `
                <div class="card" data-id="${card.id}">
                    <div class="card-content">
                        ${profileSection}
                        <div class="card-summary">${card.summary}</div>
                        <div class="card-full-content">${card.fullContent}</div>
                        <button class="read-more">اقرأ المزيد</button>
                    </div>
                    <div class="card-footer">
                        <span class="card-date">${date}</span>
                        <span class="card-rating">${stars}</span>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>